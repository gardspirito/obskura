<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <title>Gxenerala</title>
  <script src="kern.min.js"></script>
  <link rel="stylesheet" href="stil.css">
</head>
<body>
  <script>
    fetch("/lingvar").then(x => x.json()).then(x => {
      var apl = Elm.Apl.init({flags: x});

      apl.ports.konservu.subscribe(msg => {
        localStorage.setItem(msg[0], msg[1]);
      });

      apl.ports.akiru.subscribe(msg => {
        let ajxo = localStorage.getItem(msg);
        if (ajxo != null)
          apl.ports.akirejo.send([msg, ajxo]);
      })

      apl.ports.raportiErar.subscribe(msg => {
        console.error(msg);
      })
    });
  </script>
</body>
</html>
